ORG 00
MOV TMOD,#11H ;TIMER 0 AND 1 ;MODE 1
MOV 6,#80H	;OFFSET
MOV 5,#0	;COUNTING DPTR VALUE
MOV DPTR,#LOOKUP ;TO LOOKUP TABLE
;LOOKING DPTR VALUE IF IT IS 250 RESET SYSTEM
IF250:		CLR C
		MOV A,5
		CJNE A,#250,START
		CLR C
		MOV 5,#0
		MOV DPTR,#LOOKUP
START:		CLR C
		CLR A
		MOVC A,@A+DPTR
		INC DPTR
		INC 5
		ACALL ADDOFFSET
		MOV P2,A
		LCALL DELAY2MS
		SJMP IF250

RETURN:		RET




ADDOFFSET:	CLR C
		CJNE A,6,$+3
		JNC NEG
		CLR C
		ADD A,6
		SJMP RETURN
NEG:
		CPL A
		ADD A,#1
		XCH A,B
		MOV A,6
		SUBB A,B
		SJMP RETURN

TAKE2SCOMP:	CLR C
		CPL A
		ADD A,#1
		XCH A,B
		MOV A,6
		SUBB A,B
		SJMP RETURN
DELAY2MS:
		MOV TH0, #0F8H
		MOV TL0, #30H
		NOP
		SETB TR0
AGAIN:		JNB TF0, AGAIN
		CLR TR0	
		CLR TF0	
		SJMP RETURN

ORG 500H
LOOKUP: DB 00H, 02H, 03H, 03H, 03H, 02H, 01H, 00H, 0FEH, 0FEH, 0FEH, 0FFH, 01H, 02H, 03H, 04H, 04H, 04H, 03H, 01H, 00H, 0FFH, 0FFH, 00H, 01H, 03H, 04H, 05H, 06H, 05H, 04H, 03H, 02H, 01H, 00H, 00H, 01H, 03H, 04H, 06H, 06H, 06H, 06H, 04H, 03H, 02H, 01H, 01H, 01H, 03H, 04H, 06H, 07H, 07H, 06H, 05H, 04H, 03H, 01H, 01H, 01H, 02H, 04H, 05H, 06H, 07H, 07H, 06H, 05H, 03H, 02H, 01H, 01H, 02H, 03H, 04H, 06H, 06H, 07H, 06H, 05H, 03H, 02H, 01H, 00H, 01H, 02H, 03H, 04H, 06H, 06H, 06H, 05H, 03H, 02H, 01H, 00H, 00H, 00H, 02H, 03H, 04H, 05H, 05H, 04H, 03H, 02H, 00H, 0FFH, 0FFH, 0FFH, 00H, 01H, 03H, 04H, 04H, 04H, 03H, 01H, 0FFH, 0FEH, 0FDH, 0FDH, 0FEH, 0FFH, 01H, 02H, 03H, 03H, 02H, 01H, 0FFH, 0FDH, 0FCH, 0FCH, 0FCH, 0FDH, 0FFH, 00H, 01H, 01H, 01H, 00H, 0FEH, 0FDH, 0FCH, 0FBH, 0FBH, 0FCH, 0FDH, 0FEH, 00H, 00H, 00H, 0FFH, 0FEH, 0FDH, 0FBH, 0FAH, 0FAH, 0FAH, 0FCH, 0FDH, 0FEH, 0FFH, 00H, 0FFH, 0FEH, 0FDH, 0FBH, 0FAH, 0F9H, 0FAH, 0FAH, 0FCH, 0FDH, 0FEH, 0FFH, 0FFH, 0FEH, 0FDH, 0FBH, 0FAH, 0F9H, 0F9H, 0FAH, 0FBH, 0FCH, 0FEH, 0FFH, 0FFH, 0FFH, 0FDH, 0FCH, 0FBH, 0FAH, 0F9H, 0F9H, 0FAH, 0FCH, 0FDH, 0FFH, 0FFH, 0FFH, 0FEH, 0FDH, 0FCH, 0FAH, 0FAH, 0FAH, 0FAH, 0FCH, 0FDH, 0FFH, 00H, 00H, 0FFH, 0FEH, 0FDH, 0FCH, 0FBH, 0FAH, 0FBH, 0FCH, 0FDH, 0FFH, 00H, 01H, 01H, 00H, 0FFH, 0FDH, 0FCH, 0FCH, 0FCH, 0FDH, 0FEH, 0FFH, 01H, 02H, 02H, 02H, 00H, 0FFH, 0FEH, 0FDH, 0FDH, 0FDH, 0FEH, 00H

END
